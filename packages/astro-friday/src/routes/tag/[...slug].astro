---
import config from 'virtual:astro-friday-config'
import ArticleList from '../../components/ArticleList.astro'
import DefaultLayout from '../../layouts/Default.astro'
import { getPostList } from '../../utils/content'


export async function getStaticPaths() {
  const tagInfos = await getPostList({
    groupBy: 'tag',
  })

  return Array.from(tagInfos.entries()).map(([tag, entryList]) => ({
    params: {
      slug: tag,
    },
    props: {
      entryList,
    },
  }))
}

const {
  slug,
} = Astro.params

const { entryList } = Astro.props

---

<DefaultLayout
  seo={{
    noindex: true,
    nofollow: true,
  }}
>
  <p class="text-2xl live-area mb-4 op-60 flex gap-2 items-center justify-start">
    <i class="i-lucide:tag"></i>
    {
      config.viewTransition.enable
        ? <span transition:name={`tag:${slug}`}>{slug}</span>
        : <span>{slug}</span>
    }
  </p>

  <ArticleList {entryList} />
</DefaultLayout>
