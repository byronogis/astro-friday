---

---

<script>
document.documentElement.addEventListener('click', (e) => {
  const target = e.target as HTMLElement
  if (target.matches('.code-block-wrapper > .copy')) {
    const codeBlock = target.closest('.code-block-wrapper')
    if (!codeBlock)
      return

    const codeElement = codeBlock.querySelector('code')
    if (!codeElement)
      return

    const text = codeElement.textContent || ''
    navigator.clipboard.writeText(text).then(() => {
      target.classList.add('copied')
      setTimeout(() => {
        target.classList.remove('copied')
      }, 2000)
    })
  }
})
</script>

<style is:global>
  .code-block-wrapper {
    position: relative;

    &:hover {
      > .copy {
        opacity: 0.6;
      }

      > .lang {
        opacity: 0;
      }
    }

    > .copy {
      --at-apply: i-lucide:copy cursor-pointer hover:opacity-100 active:scale-85;
      position: absolute;
      top: 12px;
      right: 12px;
      z-index: 3;
      opacity: 0;
      transition: border-color .25s,background-color .25s,opacity .25s;

      &.copied {
        --at-apply: i-lucide:copy-check;
      }
    }

    > .lang {
      position: absolute;
      top: 2px;
      right: 8px;
      z-index: 2;
      -webkit-user-select: none;
      user-select: none;
      color: var(--vp-code-lang-color);
      font-size: 0.8rem;
      font-weight: 500;
      transition: color .4s,opacity .4s;
    }
  }
</style>
