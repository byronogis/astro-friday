---
import type { CollectionEntry } from '../types/content'
import config from 'virtual:astro-friday-config'
import { formatDate } from '../utils/date'

interface Props {
  entry: CollectionEntry
}

const { entry } = Astro.props

const fKeys = config.post.frontmatterKeys

---

<div class="mx-auto prose dark:prose-invert">
  {
    config.viewTransition.enable
      ? <h1 transition:name={`post:${entry.id}`}>{entry.data[fKeys.title]}</h1>
      : <h1>{entry.data[fKeys.title]}</h1>
  }

  <p class="op-50 !-mt-6">
    <span class="text-sm ws-nowrap">
      { formatDate(entry.data[fKeys.created], false) }
    </span>
    <span
      class="text-xs text-zinc:500 my-auto px-1 py-0.5 align-middle rounded bg-zinc:15 flex-none"
    >{entry.collection}</span>
  </p>

  {
    entry.data[fKeys.subtitle] && (
      <p class="op-50 italic !-mt-6">{entry.data[fKeys.subtitle]}</p>
    )
  }

  {
    entry.data[fKeys.draft] && (
      <p class="text-orange-400 px-4 py-2 border-(l-3px orange-400) bg-orange-400:10">
        This is a draft post, the content may be incomplete. Please check back later.
      </p>
    )
  }
</div>

<article class="displaying-table-of-contents mx-auto prose dark:prose-invert">
  <slot />
</article>
